# rancher v2.12.4
### 为什么要使用Rancher

想象一下这样的场景：你带领的团队正以微服务架构全速构建下一代应用，每个功能模块都封装在独立的容器中，灵活且高效。然而，随着数十甚至上百个Kubernetes集群在全球各地云端、数据中心和边缘节点上蔓延，一种新的“混沌”悄然滋生。开发团队抱怨部署流程复杂且缓慢，运维团队在数个不同的集群控制台间疲于奔命，安全策略像打补丁一样难以统一实施。你拥有最先进的集装箱（容器），却缺少一个指挥全局的港口调度中心。

这就是现代云原生世界最尖锐的矛盾：我们追求极致的敏捷与弹性，却被由此产生的、呈指数级增长的运维复杂性所拖累。每个集群都是一个孤岛，知识、工具和流程无法复用。**Rancher正是为解决这一核心矛盾而生。** 它不是一个替代品，而是一个进化。它承认多集群、混合云是必然的未来，并选择成为驾驭这片新海域的“统一控制平面”。使用Rancher，意味着你将从一个在孤岛间划船的船员，转变为掌控整个舰队航向的船长。它提供的不仅是便捷的工具，更是一种秩序，让你在享受容器化技术红利的同时，重新夺回管理的清晰度与掌控力。在敏捷与秩序之间，你不再需要妥协。

### Rancher是什么

Rancher 是一个开源的全栈化 Kubernetes 容器管理平台。简单来说，它让企业能够像管理单个应用一样，轻松地部署、管理和运维遍布任何地方的多个 Kubernetes 集群。它提供了直观的用户界面、统一的安全策略、集成的应用部署能力以及强大的运维工具，将复杂的 Kubernetes 基础设施变得简单可控。

### 入门示例

**真实场景：** 一家电商公司，其应用由前端网站、后端商品服务、订单服务及用户服务等多个微服务构成。为了高可用和负载均衡，他们在 AWS 和 Azure 上分别运行了生产 Kubernetes 集群，同时在本地的开发测试环境中也有一个集群。

**开发与运维示例：**

1.  **统一部署：** 开发者小张为“商品服务”开发了一个新功能。他不再需要分别登录三个集群进行部署。他只需在 Rancher 的全局视图中，选择一个或多个目标集群（如开发测试集群），通过 Rancher 集成的 Helm 功能或直接提交 YAML 文件，即可一键将新版本服务部署到指定集群的指定项目中。Rancher 会自动处理与各集群 API 的通信。
2.  ** centralized 配置与密钥管理：** 数据库连接字符串、第三方 API 密钥等敏感配置，可以由运维人员在 Rancher 中集中创建和管理为“密文”或“配置映射”，并安全地分发到所有集群的微服务中，确保了一致性和安全性。
3.  **监控与告警一体化：** 无论服务运行在哪个云上，运维团队都可以在 Rancher 的同一个监控仪表板上，查看所有集群及其内部工作负载的性能指标、日志和事件。他们可以设置统一的告警规则，当任何集群的资源使用率超过阈值或服务出现异常时，及时收到通知。
4.  **金丝雀发布与流量管理：** 当新版本需要在生产环境（AWS 集群）进行灰度发布时，运维人员可以直接在 Rancher UI 中，通过简单的滑块操作，将一部分用户流量（例如10%）引导至新版本的 Pod，同时监控关键指标。确认稳定后，再逐步扩大流量比例，完成无缝升级。

通过 Rancher，这家电商公司实现了对混合多云环境下所有 Kubernetes 资源的“鸟瞰图”和“精细操控”，极大提升了开发运维效率和系统的整体可靠性。

### Rancher v2.12.4版本更新了什么

Rancher v2.12.4 是一个 Prime 版本的维护更新，主要修复了若干关键错误。它修复了集群所有者无法管理 etcd 快照、项目资源配额计算错误导致 Webhook 异常，以及卸载 Rancher 时因新增 Fleet 资源而失败的问题。同时，该版本继续强调了对已弃用的 RKE1 的支持终止时间线，并明确了安装时需启用 Kubernetes API 聚合层等要求。升级前务必检查节点磁盘空间并备份数据。

### 更新日志
# Release v2.12.4

> **重要提示：** 如果您正在使用 Active Directory Federation Service (AD FS)，升级到 Rancher v2.10.1 或更高版本可能会导致身份验证问题，需要手动干预。这些问题是由于 AD FS 信赖方信任无法从元数据中选取签名验证证书所致。可以通过以下两种方法之一进行纠正：
> *   从联合元数据更新信赖方信任信息（信赖方信任 -> 从联合元数据更新...）。
> *   直接添加证书（信赖方信任 -> 属性 -> 签名选项卡 -> 添加 -> 选择证书）。
> 更多信息请参阅 [#48655](https://github.com/rancher/rancher/issues/48655)。

> **重要提示：** [Rancher-Istio](https://ranchermanager.docs.rancher.com/v2.12/integrations-in-rancher/istio) 在 Rancher v2.12.0 中已被弃用；请转向 [SUSE 应用集合](https://apps.rancher.io) 构建的 Istio 以获得增强的安全性（包含在 SUSE Rancher Prime 订阅中）。详细信息可参阅 [此公告](https://forums.suse.com/t/deprecation-of-rancher-istio/45043)。

Rancher v2.12.4 是 Rancher 最新的补丁版本。这是一个 Prime 版本，引入了维护更新和错误修复。要了解有关 Rancher Prime 的更多信息，请查看我们的 [Rancher Prime 平台](https://www.rancher.com/products/rancher-platform)页面。

有关主要次要版本中新功能的更多信息，请参阅 [v2.12.0 发布说明](https://github.com/rancher/rancher/releases/tag/v2.12.0)。

## 自 v2.12.3 以来的变更

查看完整的[变更列表](https://github.com/rancher/rancher/compare/v2.12.3...v2.12.4)。

## 集群供给

### 主要错误修复

*   修复了在下游集群中被分配了“集群所有者”角色的标准用户无法通过 Rancher UI 查看或恢复现有 etcd 快照的问题。集群所有者现在拥有正确的权限，可以按预期查看和恢复快照。参见 [#52317](https://github.com/rancher/rancher/issues/52317)。

## Rancher Webhook

### 主要错误修复

*   修复了与项目资源配额相关的问题，该问题导致 `usedLimit` 值计算错误并