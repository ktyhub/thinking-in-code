# rancher v2.11.8
### 为什么要使用Rancher

想象一下，你拥有一片丰饶的数字牧场，里面奔跑着成百上千头名为“容器”的牲畜。它们活力四射，但难以驯服；它们潜力无限，但各自为政。你梦想着构建宏伟的应用殿堂，却不得不将大部分精力耗费在修建围栏、调配饲料和防止牲畜走失这些琐事上。这就是当代开发者在云原生世界面临的经典矛盾：我们渴望Kubernetes这台强大“拖拉机”带来的生产力解放，却又不得不深陷于操控其复杂仪表盘的运维泥潭。

而Rancher，就是那位你一直在等待的牧场管家。它并非要取代Kubernetes，而是为你赋予驯服这片混沌的缰绳与地图。当你深夜里还在为多个集群的配置、安全和升级焦头烂额时，Rancher为你亮起一盏统一的明灯。它化解了强大能力与易用性之间的根本冲突，让开发者回归创新的本源，让运维者重获掌控的从容。选择Rancher，意味着你选择不再用原始工具管理现代基础设施，而是将专业性交给平台，将创造力留给自己。

### Rancher是什么

Rancher是一个开源的企业级Kubernetes管理平台。它如同一套统一的控制面板，让你能够轻松地部署、管理和运维在任何地方运行的多个Kubernetes集群。简而言之，Rancher让复杂的Kubernetes变得简单易用。

### 入门示例

**真实场景：** 假设你是一家电商公司的平台工程师。公司业务快速增长，你需要在公有云（如AWS）和私有数据中心同时部署多套Kubernetes集群，分别用于开发、测试和生产环境。团队需要快速创建命名空间、部署应用、配置网络策略和监控日志，但又不希望每个人都去学习复杂的kubectl命令和集群底层运维。

**开发示例：**
1.  **统一部署**：通过Rancher的图形化界面，你可以在半小时内，分别在AWS EKS和内部VMware集群上拉起一套全新的Kubernetes集群，无需手动编写繁琐的配置。
2.  **应用部署**：开发团队需要部署一个微服务应用。他们无需接触命令行，只需在Rancher的“应用市场”中找到并点击安装“Ingress Controller”和“Prometheus监控栈”。
3.  **权限管理**：你通过Rancher内置的RBAC和项目（Project）功能，为前端团队、后端团队分别创建了独立的项目空间，并赋予他们相应的部署和管理权限，实现了安全的多租户隔离。
4.  **持续观察**：所有集群、节点、工作负载的健康状态和资源消耗，都集中展示在Rancher的仪表盘上。某个生产服务出现异常时，你可以直接在Rancher中查看事件日志和容器日志，快速定位问题。

通过Rancher，你将分散的集群“碎片”拼接成了一幅完整、可控的基础设施画卷。

### Rancher v2.11.8版本更新了什么

Rancher v2.11.8 是一个 Prime 版本的维护更新，主要修复了关键错误。它重点解决了项目资源配额（Project Resource Quotas）计算错误导致的 Webhook 准入问题，确保了配额限制验证的准确性。同时，文档明确了 RKE1 已进入生命周期终结阶段，并提醒注意 Rancher-Istio 的弃用。升级前务必遵循指南进行备份，并注意为离线环境配置正确的参数。

### 更新日志

# Release v2.11.8

> **注意：**
> 如果您正在使用 Active Directory 联合服务（AD FS），升级到 Rancher v2.10.1 或更高版本可能会导致身份验证问题。原因是 AD FS 信赖方信任无法从元数据中获取签名验证证书，这需要手动干预。可以通过尝试从联合元数据更新信赖方信任信息，或直接添加证书来纠正此问题。更多信息请参阅 #48655。

> **重要：**
> Rancher Kubernetes Engine (RKE/RKE1) 的生命周期已于 **2025年7月31日** 结束。Rancher 2.12.0 及更高版本不再支持供应或管理下游 RKE1 集群。我们建议将 RKE1 集群迁移到 RKE2，以确保持续的支持和安全更新。在此处了解有关过渡的更多信息。

> **重要：**
> Rancher-Istio 在 Rancher v2.12.0 中已被弃用；请转向 SUSE 应用程序集合中构建的 Istio 以获得增强的安全性（包含在 SUSE Rancher Prime 订阅中）。详细信息可在此公告中找到。

> **重要：**
> 在升级到任何 Rancher 版本之前，请查看安装/升级说明。

Rancher v2.11.8 是 Rancher v2.11 的最新补丁版本。这是一个 Prime 版本，引入了维护更新和错误修复。要了解有关 Rancher Prime 的更多信息，请参阅我们关于 Rancher Prime 平台的页面。

有关主要次要版本中新功能的更多信息，请参阅 v2.11.0 发行说明。

## Changes Since v2.11.7

查看完整的更改列表。

## Rancher Webhook

### 主要错误修复

*   修复了与项目资源配额相关的问题，该问题导致 `usedLimit` 值计算不正确并引发后续的准入 Webhook 错误。Webhook 验证现在能正确根据计算出的使用情况检查新的期望配额状态，从而在保存正确的限制时防止出错。当项目是新的且没有命名空间时，将丢弃 `usedLimit`，以防止陈旧或用户提供的虚假值被持久化。参见 #51642。

# Install/Upgrade Notes

> *   如果您是首次安装 Rancher，您的环境必须满足安装要求。

## 镜像制品的变化

Rancher v2.12.0、v2.11.4 和 v2.10.8 中重命名了镜像制品摘要文件。在此更改之前，出于兼容性原因，为每个操作系统和架构维护了单独的镜像摘要文件。随着此更改，现在每个操作系统只提供一个文件：
*   `rancher-images-digests-linux-amd64.txt` 和 `rancher-images-digests-linux-arm64.txt` 文件将重命名为 `rancher-images-digests-linux.txt`。
*   `rancher-images-digests-windows-ltsc2019.txt` 和 `rancher-images-digests-windows-ltsc2022.txt` 文件将重命名为 `rancher-images-digests-windows.txt`。

# 升级要求

*   **创建备份**：在升级 Rancher 之前创建备份。要在升级后回滚 Rancher，必须先备份并将 Rancher 恢复到之前的版本。由于 Rancher 将恢复到创建备份时的相同状态，因此升级后的任何更改在恢复后将不会包含在内。
*   **CNI 要求**：
    *   对于 Kubernetes v1.19 及更高版本，请禁用 firewalld，因为它与各种 CNI 插件不兼容。参见 #28840。
    *   在升级或安装使用 nf_tables 作为后端数据包过滤器的 Linux 发行版（例如 SLES 15、RHEL 8、Ubuntu 20.10、Debian 10 或更高版本）时，请升级到 RKE v1.19.