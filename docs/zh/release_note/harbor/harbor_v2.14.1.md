# harbor v2.14.1
### 为什么要使用Harbor

在数字世界的惊涛骇浪中，你的容器镜像正独自漂泊。想象一下：凌晨三点，生产线突然停滞，只因一个被意外覆盖的镜像版本；安全团队紧急预警，一个来自公共仓库的依赖潜藏着未被察觉的漏洞；全球团队因网络延迟，下载一个基础镜像如同等待一场跨洋的潮汐。混乱、风险与低效——这是许多开发者日常背后的沉默战争。

而Harbor，就是你亟需的那座智慧港口。它不仅仅是另一个仓库，它是秩序、安全与控制力的象征。它将散落各处的镜像汇集于此，给予它们清晰的版本标签、严格的权限守卫和自动的安全扫描。它让你不再在公共服务的不可控与自建系统的复杂中挣扎。选择Harbor，意味着选择让创新之舟在可靠的水域中全速航行，而非在风险的暗礁中搁浅。

### Harbor是什么

Harbor 是一个开源的企业级容器镜像仓库项目。它为你安全地存储、签名和管理用于云原生应用的容器镜像（如Docker镜像）和Helm Chart。简单来说，它就像你私有环境里的“Docker Hub”，但提供了企业必需的身份认证、安全漏洞扫描、镜像复制和基于角色的访问控制等强大功能。

### 入门示例

**真实场景**：假设你所在的“极速创新”电商公司，开发团队正在构建一个微服务架构的促销系统。前端、后端和算法服务分别由三个小组开发，每个服务都打包成独立的Docker镜像。

**开发示例**：
1.  **部署Harbor**：你在公司内网Kubernetes集群上部署了Harbor，地址为 `harbor.your-company.com`。
2.  **推送镜像**：后端小组开发完成 `promotion-api` 服务后，将其构建为镜像。
    ```bash
    # 标记镜像，指向你的私有Harbor仓库
    docker tag promotion-api:latest harbor.your-company.com/dev/promotion-api:v1.2.0
    # 登录Harbor（首次需要）
    docker login harbor.your-company.com
    # 推送镜像
    docker push harbor.your-company.com/dev/promotion-api:v1.2.0
    ```
3.  **安全扫描**：镜像推送到Harbor的 `dev` 项目后，Harbor自动调用集成的Trivy扫描器，几分钟后报告显示该镜像无高危漏洞，允许进入下一阶段。
4.  **拉取与部署**：测试团队从Harbor的 `dev` 项目中拉取该镜像进行集成测试。通过后，运维团队使用Harbor的复制功能，将稳定的 `v1.2.0` 镜像同步到生产环境的Harbor项目，随后通过Kubernetes部署上线。

整个过程，镜像流转清晰、安全可控，团队协作顺畅。

### Harbor v2.14.1版本更新了什么

Harbor v2.14.1 是一个维护版本，主要聚焦于功能增强、问题修复和组件升级。它新增了针对代理缓存项目的上游连接数限制参数及对应管理界面。修复了机器人账户相关的问题，并提供了初始化时禁用审计日志入库的选项以提升灵活性。此外，版本升级了包括Go语言、基础镜像及多个关键依赖（如Trivy、JWT库和Kubernetes客户端）至新版本，旨在提升安全性、兼容性和系统稳定性。

### 更新日志

## 发生了什么变化

### 激动人心的新功能 🎉

*   为每个代理缓存项目添加 `max_upstream_conn` 参数 (#22348, #22409)
*   添加用于限制上游注册表连接的用户界面 (#22410)

### 组件更新 ⬆️

*   修复机器人账户相关问题 (#22394)
*   允许在初始化时禁用审计日志写入数据库 (#22469)
*   为 `skip_audit_log_database` 配置添加迁移SQL (#22489)
*   重构初始化 `skip_audit_log_database` 的逻辑 (#22496)
*   为 v2.14.1 版本升级 Trivy 和 Trivy 适配器 (#22501)
*   为 v2.14.1 版本升级 Go 语言版本 (#22499)
*   为 v2.14.1 版本升级基础镜像 (#22506)
*   升级 `src` 目录下的 `github.com/golang-jwt/jwt/v5` 依赖，版本从 5.2.2 至 5.3.0 (#22518)
*   升级 `src` 目录下的 `k8s.io/client-go` 依赖，版本从 0.33.3 至 0.34.1 (#22515)
*   将 Trivy 适配器回退至旧版本 (#22541)
*   为 2.14.1 版本升级基础和 Go 组件 (#22550)
*   为 v2.14.1 版本升级基础镜像版本 (#22552)
*   更新 Go 版本声明 (#22564)
*   为 v2.14.1 版本升级基础 Photon 镜像 (#22576)

**完整更新日志**: [v2.14.0...v2.14.1](https://github.com/goharbor/harbor/compare/v2.14.0...v2.14.1)

### 总结概括

本次更新主要是一个以维护和优化为主的版本。它引入了对代理缓存项目上游连接进行精细化管理的新功能，并修复了已知问题。同时，版本进行了大规模的组件升级，包括底层编程语言、安全扫描器、关键依赖库和基础运行镜像，旨在全面提升系统的安全性、稳定性和对现代技术栈的兼容性。