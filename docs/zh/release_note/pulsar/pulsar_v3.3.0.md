# pulsar v3.3.0
```markdown
### PIP

- PIP-315: 配置延迟传递的最大延迟限制 ([#21798](https://github.com/apache/pulsar/pull/21798))
- PIP-321: 在命名空间级别引入 `allowed-cluster` ([#21648](https://github.com/apache/pulsar/pull/21648))
- PIP-324: Alpine Docker 镜像 ([#21716](https://github.com/apache/pulsar/pull/21716))
- PIP-325: 添加中止事务的命令 ([#21731](https://github.com/apache/pulsar/pull/21731))
- PIP-326: 创建一个 BOM 以简化依赖管理 ([#21747](https://github.com/apache/pulsar/pull/21747))
- PIP-329: 维护 Pulsar Docker 镜像最新标签的策略 ([#21872](https://github.com/apache/pulsar/pull/21872))
- PIP-330: `getMessagesById` 获取所有消息 ([#21873](https://github.com/apache/pulsar/pull/21873))
- PIP-342: 支持在 Pulsar 客户端中使用 OpenTelemetry 指标 ([#22178](https://github.com/apache/pulsar/pull/22178))
- PIP-343: 使用 picocli 替代 jcommander ([#22181](https://github.com/apache/pulsar/pull/22181))
- PIP-344: 修正公共 API `pulsarClient.getPartitionsForTopic(topicName)` 的行为 ([#22182](https://github.com/apache/pulsar/pull/22182))
- PIP-335: Oxia 元数据插件 ([#22009](https://github.com/apache/pulsar/pull/22009))
- PIP-339: 为 Pulsar Sinks 和 Sources 引入 `--log-topic` 选项 ([#22071](https://github.com/apache/pulsar/pull/22071))

### Broker

- [admin][broker] 修复强制删除订阅无效的问题 ([#22423](https://github.com/apache/pulsar/pull/22423))
- [cleanup][admin] 删除 PersistentTopicsBase 中未使用的方法 ([#22424](https://github.com/apache/pulsar/pull/22424))
- [cleanup][broker] 删除创建 OwnershipCache 时未使用的 NamespaceBundleFactory 参数 ([#22482](https://github.com/apache/pulsar/pull/22482))
- [cleanup][broker] 修复 TransactionBuffer#isTxnAborted 的文档 ([#21956](https://github.com/apache/pulsar/pull/21956))
- [cleanup][broker] 修复 TransactionTimeoutTrackerImpl#addTransaction 的返回值 ([#22020](https://github.com/apache/pulsar/pull/22020))
- [cleanup][broker] 删除无用的代码注释 ([#22459](https://github.com/apache/pulsar/pull/22459))
- [cleanup][meta] 删除 com.beust.jcommander.internal 导入 ([#22294](https://github.com/apache/pulsar/pull/22294))
- [cleanup][ml] ManagedCursor 清理 ([#22246](https://github.com/apache/pulsar/pull/22246))
- [cleanup][test] 删除无用的 TestAuthorizationProvider2 ([#22595](https://github.com/apache/pulsar/pull/22595))
- [feat][admin] 在 Admin 客户端中默认启用 Gzip 压缩 ([#22464](https://github.com/apache/pulsar/pull/22464))
- [feat][admin] PIP-330: `getMessagesById` 获取所有消息 ([#21918](https://github.com/apache/pulsar/pull/21918))
- [feat][broker] 实现 PIP-323: 完整的积压配额遥测 ([#21816](https://github.com/apache/pulsar/pull/21816))
- [feat][broker] PIP-264: 添加 Java 运行时指标 ([#22616](https://github.com/apache/pulsar/pull/22616))
- [feat][broker] PIP-264: 添加主题消息指标 ([#22467](https://github.com/apache/pulsar/pull/22467))
- [feat][misc] 添加 Pulsar BOM (材料清单) ([#21871](https://github.com/apache/pulsar/pull/21871))
- [feat][misc] PIP-264: 使用 OpenTelemetry 实现主题查找指标 ([#22058](https://github.com/apache/pulsar/pull/22058))
- [feat][misc] PIP-320: 添加 OpenTelemetry 脚手架 ([#22010](https://github.com/apache/pulsar/pull/22010))
- [fix] 修复 Reader 可能被事务中止消息卡住的问题 ([#22610](https://github.com/apache/pulsar/pull/22610))
- [fix] 修复从 long 到 int 的隐式转换 ([#22055](https://github.com/apache/pulsar/pull/22055))
- [fix] 在遮蔽的客户端库中包含 swagger 注释 ([#22570](https://github.com/apache/pulsar/pull/22570))
- [fix] 在 AbstractMetadataStore 中恢复方法为已弃用 ([#21950](https://github.com/apache/pulsar/pull/21950))
- [fix] 测试时将客户端实例置为空 ([#22631](https://github.com/apache/pulsar/pull/22631))
- [fix][admin] 在 Open API 上清晰定义 REST API ([#22783](https://github.com/apache/pulsar/pull/22783))
- [fix][admin] 在 Open API 上清晰定义 Namesaces@v2 的 REST API ([#22775](https://github.com/apache/pulsar/pull/22775))
- [fix][admin] 在 Open API 上清晰定义 Topics 的 REST API ([#22782](https://github.com/apache/pulsar/pull/22782))
- [fix][admin] 修复无法删除 v1 租户的问题 ([#22550](https://github.com/apache/pulsar/pull/22550))
- [fix][admin] 修复弃用检查 ([#22653](https://github.com/apache/pulsar/pull/22653))
- [fix][admin] 修复命名空间管理 API 异常响应 ([#22587](https://github.com/apache/pulsar/pull/22587))
- [fix][admin][part-1] 在 Open API 上清晰定义 REST API ([#22774](https://github.com/apache/pulsar/pull/22774))
- [fix][broker] 添加缺失的 opentelemetry-sdk-testing 依赖到 pulsar-broker-auth-sasl 的测试中 ([#22665](https://github.com/apache/pulsar/pull/22665))
- [fix][broker] 避免在关闭具有可扩展负载管理器的 broker 时卡住 ([#22573](https://github.com/apache/pulsar/pull/22573))
- [fix][broker] 避免消费者在重新连接后接收已确认的消息 ([#21187](https://github.com/apache/pulsar/pull/21187))
- [fix][broker] 在命名空间被删除时避免执行 prepareInitPoliciesCacheAsync ([#22268](https://github.com/apache/pulsar/pull/22268))
- [fix][broker] 在检查过期消息时避免过期未关闭的账本 ([#22335](https://github.com/apache/pulsar/pull/22335))
- [fix][broker] 在将光标添加到 `waitingCursors` 之前检查光标状态 ([#22191](https://github.com/apache/pulsar/pull/22191))
- [fix][broker] 在启用 ExtensibleLoadManager 时检查 broker 是否可用于 SLA 监控包 ([#22485](https://github.com/apache/pulsar/pull/22485))
- [fix][broker] 关闭由于 dispatcher.consumerList 和 dispatcher.consumerSet 不匹配而卡住的调度器 ([#22270](https://github.com/apache/pulsar/pull/22270))
- [fix][broker] 即使执行器已关闭也继续关闭 ([#22599](https://github.com/apache/pulsar/pull/22599))
- [fix][broker] 在当前账本关闭后创建新账本 ([#22034](https://github.com/apache/pulsar/pull/22034))
- [fix][broker] 在删除主题时删除压缩账本 ([#21745](https://github.com/apache/pulsar/pull/21745))
- [fix][broker] 禁用系统主题消息去重 ([#22582](https://github.com/apache/pulsar/pull/22582))
- [fix][broker] 在使用 ExtensibleLoadBalancer 时在蓝绿迁移期间不迁移内部主题 ([#22478](https://github.com/apache/pulsar/pull/22478))
- [fix][broker] 启用批处理时由于确认和传递并发导致的负未确认消息 ([#22090](https://github.com/apache/pulsar/pull/22090))
- [fix][broker] 根据账本关闭时间过期消息以避免客户端时钟