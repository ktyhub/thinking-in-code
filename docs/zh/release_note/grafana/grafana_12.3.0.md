# grafana 12.3.0
## 为什么要使用Grafana

想象一下，你站在一座现代工厂的中央，四周是数以千计的机器，每一台都在轰鸣、震颤、吐出无尽的数据流。温度、压力、转速、能耗……它们如同数字世界的暗语，诉说着效率与故障的故事。然而，如果没有一双能解读这些密语的眼睛，这一切不过是噪音的汪洋。这就是当今IT系统、应用程序和商业数据的真实写照：我们被数据淹没，却渴望洞察。

这就是Grafana登场的原因，它正是为了终结这种“数据富足，见解贫困”的矛盾而生的。在业务飞速运转的世界里，等待一份隔日的报表如同在高速公路上翻阅纸质地图——不仅过时，而且危险。Grafana赋予你实时的、可视化的超能力，将冰冷的数据流转化为有温度、可交互的叙事画面。它不是为了制造更多图表，而是为了在繁杂的信息洪流中，为你点亮一座指引行动的灯塔。选择Grafana，就是选择不再盲目前行，而是驾驭数据，洞见未来。

## Grafana是什么

Grafana是一个开源的、功能强大的数据可视化和监控平台。它就像一个万能的数据仪表盘组装器，可以从各种数据库、监控系统（如Prometheus、MySQL、Elasticsearch等）中拉取数据，并将它们转换成清晰直观的图表、图形和警报。简而言之，它让任何人都能看懂复杂的数据。

## 入门示例

**真实场景：**
假设你是一家电商公司的运维工程师。“黑色星期五”大促即将开始，你的任务是确保网站稳定。你需要实时监控：服务器CPU/内存使用率、网站每秒请求数、订单交易成功率以及数据库查询延迟。

**开发示例：**
1.  **部署与数据源连接**：你在服务器上安装Grafana。登录后，第一件事就是添加“数据源”。例如，添加Prometheus（它已收集了服务器指标），再添加一个MySQL数据源来连接你的订单数据库。
2.  **创建第一个仪表盘**：点击“创建仪表盘” -> “添加新面板”。
    *   在查询编辑器里，选择Prometheus数据源，输入查询表达式，如 `rate(http_requests_total[5m])`，即可绘制出网站流量曲线。
    *   再添加一个面板，选择MySQL数据源，编写SQL：`SELECT COUNT(*) FROM orders WHERE status=‘SUCCESS’`，将其设置为“统计面板”，你就能看到实时成功订单数。
3.  **设置警报**：当服务器CPU使用率超过80%持续5分钟时，你需要立刻知道。在图表编辑器中，进入“警报”选项卡，设置规则。可以配置当触发时，自动发送通知到Slack频道或你的手机短信。
4.  **组合与分享**：将流量图、订单统计图、服务器状态图并排放在同一个仪表盘上。你可以得到一个完整的“大促作战指挥中心”视图。最后，将这个仪表盘的链接分享给你的老板或团队成员，他们无需登录也能查看（取决于权限设置）。

短短几小时，你就从面对一堆零散的日志和数字，变成了拥有一个全景式、自动化的监控指挥中心。

## Grafana 12.3.0版本更新了什么

Grafana 12.3.0版本主要围绕API客户端重构、警报功能增强和用户体验优化进行更新。它将API客户端提取为独立包并增加了钩子机制，提升了集成灵活性。警报模块新增了对重复规则的位置匹配支持，并引入了抖动机制以平滑数据库负载压力。此外，地图组件（Geomap）将测试版图层转为正式可用，并新增了MapLibre底图样式，同时CloudWatch数据源新增了对日志异常（Log Anomalies）查询的支持。

## 更新日志

[下载页面](https://grafana.com/grafana/download/12.3.0)
[新功能亮点](https://grafana.com/docs/grafana/latest/whatsnew/)

### 功能与增强

*   **API客户端：** 为客户端添加懒加载钩子 (#113226)
*   **API客户端：** 自动设置PATCH请求头 (#111879)
*   **API客户端：** 将API客户端提取为独立包 (#111810)
*   **API客户端：** 将API客户端提取为独立包（企业版）
*   **API客户端：** 更新API客户端以包含所有端点并添加钩子 (#113061)
*   **访问控制：** 在服务账户角色显示中包含隐藏角色 (#112924)
*   **访问控制：** 提高数据源LBAC规则的限制 (#111560)
*   **可访问性：** 在小视口下将数据源信息换行显示为两行 (#113033)
*   **警报增强：** 添加插入规则UID标签的变异器，以支持高效使用标签选择器（企业版）
*   **警报：** 在规则查看页面添加增强组件（企业版）
*   **警报：** 在规则查看页面添加增强部分（企业版）
*   **警报：** 为周期性警报状态存储添加抖动支持，以减少数据库负载峰值 (#111357)
*   **警报：** 为相同的警报规则添加基于位置的匹配 (#112407)
*   **警报：** 在restrictedGrafanaApis中创建alertingAlertRuleFormSchema (#112794)
*   **警报：** 在中心状态历史视图中显示错误信息 (#111445)
*   **警报：** 每条规则的增强功能 wip-2（企业版）
*   **警报：** 如果按文件夹分组则隐藏元数据 (#113216)
*   **警报：** 改进模板AI助手提示并添加一些示例（企业版）
*   **警报：** 将增强选项卡移动到详情和版本之间 (#110886)
*   **警报：** 从警报表单中移除AI反馈按钮 (#112713)
*   **警报：** 移除未使用的组件 (#111320)
*   **警报：** 为SmartAlertTypeDetector移除useRulesSourcesWithRuler (#111623)
*   **警报：** 正确呈现远程警报管理器静默创建错误 (#112757)
*   **警报：** 分类 (#110339)
*   **警报：** 分类规则详情抽屉 (#112055)
*   **警报：** 更新模板AI助手的提示示例（企业版）
*   **警报：** 更新分类页面中实例详情抽屉的宽度 (#113209)
*   **警报：** 在前端使用新的增强端点（企业版）
*   **警报：** 使用ruleUid作为属性，而不是从规则上下文中提取（企业版）
*   **分析：** 在数据源分析中聚合每日摘要（企业版）
*   **分析：** 对Loki导出应用适当的批处理并添加可配置设置（企业版）
*   **注释：** 通过UID保存时排除内部仪表板ID (#111535)
*   **Azure：** 在插件上下文中使用SSO设置 (#112058)
*   **按钮：** 按钮的激活状态样式 (#111235)
*   **缓存：** 如果数据源oauthPassThru=true则禁用缓存（企业版）
*   **画布：** 允许非图标背景图片字段 (#112308)
*   **杂项：** 将logsdrilldown替换添加到apps/iam/go.mod (#112581)
*   **CloudWatch日志：** 不在日志响应的每个字段添加控制台链接 (#112230)
*   **CloudWatch日志：** 支持日志异常查询类型 (#113067)
*   **CloudWatch：** 为