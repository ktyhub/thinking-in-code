# dify v1.0.0
### 为什么要使用dify

在当今快速发展的科技时代，企业和开发者面临着前所未有的挑战与机遇。如何在复杂的技术环境中快速构建和部署智能应用，成为了一个亟待解决的问题。Dify的出现，正是为了打破这一困境。它不仅提供了强大的功能，还通过插件系统让用户能够灵活扩展应用，满足个性化需求。然而，随着技术的不断进步，传统的开发方式已无法满足快速迭代的需求，Dify的插件化设计恰恰解决了这一矛盾，让开发者能够在短时间内实现复杂的功能，提升工作效率。

### dify是什么

Dify是一个开源的AI应用开发平台，旨在简化和加速智能应用的构建过程。它通过模块化的插件系统，允许用户轻松集成外部服务和自定义功能，从而实现灵活的应用开发。Dify的设计理念是“即插即用”，使得开发者能够快速适应不断变化的需求。

### 入门示例

想象一下，一个初创企业希望开发一个智能客服系统。使用Dify，开发者可以通过简单的命令安装所需的插件，例如自然语言处理、用户身份验证等功能。只需几行代码，开发者就能将这些功能集成到他们的应用中，而无需从头开始编写复杂的逻辑。这种便捷的方式不仅节省了时间，还降低了开发成本，让企业能够专注于核心业务。

### dify v1.0.0版本更新了什么

Dify v1.0.0版本引入了插件系统，允许用户创建以.difypkg为后缀的插件，扩展Dify的功能。新版本还引入了工作流中的Agent节点，用户可以通过插件定义代理的行为。此外，Dify Marketplace的推出使得插件的分享和下载变得更加便捷。最后，Docker部署支持也得到了增强，简化了应用的启动过程。

### 更新日志

## 🎉 引入Dify插件 🎉
我们很高兴地宣布推出Dify **v1.0.0**。

插件是模块化组件，能够以即插即用的方式扩展AI应用。现在，您可以轻松地将外部服务和自定义功能与您的Dify应用程序集成。

### 新特性
- 我们开发了一个插件系统，用户可以创建以.difypkg为后缀的插件。通过安装不同的插件包，您可以为Dify添加各种功能。
- 通过这个系统，我们解耦了可以从Dify扩展的工具和模型，使您能够真正以即插即用的方式安装它们。
- 我们在工作流中引入了新的Agent节点，代理的行为现在可以通过插件定义。这意味着Dify不再局限于内置策略，您可以定义自己的代理策略。
- 我们还引入了一种新的插件类型，称为扩展，它是托管在Dify内的自定义服务。您可以通过插件自定义此服务的代码，以处理外部Webhook事件。
- 我们推出了Dify Marketplace，这是一个集中平台，用户可以自由分享插件，允许用户发布和下载不同的插件。

### Docker部署
v1.0.0支持Docker Compose部署。您可以使用以下命令启动Dify：
```
git checkout 1.0.0
cd ./docker
docker compose -f docker-compose.yaml up -d
```

### 插件迁移
- 注意：如果您从旧版本升级到v1.0.0，您需要执行一些基本的迁移步骤。升级到v1.0.0的第一步是将您当前环境中使用的工具和模型安装到新的插件环境中，确保在数据库迁移之前完成插件安装，运行以下命令：
```
poetry run flask extract-plugins --workers=20
```
此命令将提取当前环境中使用的所有模型和工具。workers参数决定提取过程中的并行进程数；根据需要进行调整。最终结果将保存在plugins.jsonl文件中，其中包含当前Dify实例中所有工作空间的插件信息。确保您的网络正常，并可以访问[https://marketplace.dify.ai](https://marketplace.dify.ai)，然后运行以下命令：
```
poetry run flask install-plugins --workers=2
```
此命令将下载并安装所有必要的插件到最新环境中。

### 数据库迁移
完成基本插件安装过程后，按照标准Dify升级程序更新数据库架构到最新版本。
```
poetry run flask db upgrade
```
Dify v1.0包括对旧数据的兼容性。您应该能够正常操作，但为了更好的未来兼容性，在确认不会回退到旧版本后，运行以下数据迁移命令：
```
poetry run flask migrate-data-for-plugin
```
此命令将数据库中现有模型和工具的供应商前缀更改为langgenius，例如将openai转换为langgenius/openai/openai。此操作可能会影响旧版Dify的功能，因此在运行此命令之前请备份数据库，以防止意外问题。

### 其他变更
#### 🚀 新特性与增强
- **平移与缩放**：MiniMap现在支持平移和缩放。
- **统一推理模型**：通过标准化think标签增强兼容性。
- **Docker SSRF设置**：优化Docker中的SSRF相关超时设置。
- **HNSW向量索引**：现在可用于TiDB向量存储，优化大数据集的处理。
- **高效检索服务**：我们加倍努力提高数据检索速度。

#### 🛠️ 性能优化与错误修复
- **逻辑优化**：集成短路评估以优化逻辑条件。
- **SQL查询减少**：在切片SQL查询时提高消息加载速度。
- **简化工作流**：简化工作流。

#### 🌟 新贡献者
热烈欢迎我们的新贡献者！他们为我们的项目做出了首次贡献。

**完整更新日志**：有关所有更改的全面概述，请查看完整更新日志[这里](https://github.com/langgenius/dify/compare/0.15.3...1.0.0)。

感谢您成为我们旅程的一部分，您的贡献和支持使这个项目在每次发布中变得更好！🚀

### 总结

Dify v1.0.0的更新不仅引入了强大的插件系统和Marketplace，还优化了Docker部署和数据迁移流程，极大地提升了用户体验。新特性和增强功能使得Dify在智能应用开发领域更具竞争力，欢迎更多开发者加入这个充满活力的社区！