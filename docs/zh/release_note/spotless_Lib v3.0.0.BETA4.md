# spotless Lib v3.0.0.BETA4
### 为什么要使用spotless

在现代软件开发中，代码的整洁性和一致性至关重要。想象一下，一个团队在开发过程中，代码风格各异，导致了无尽的争论和混乱。使用Spotless，您可以轻松地自动格式化代码，确保每个团队成员的代码风格一致，从而减少不必要的摩擦。更重要的是，Spotless不仅仅是一个格式化工具，它还能够在格式化失败时提供灵活的错误处理，帮助开发者快速定位问题。选择Spotless，就是选择了高效、整洁和和谐的开发环境。

### spotless是什么

Spotless是一个开源的代码格式化工具，旨在帮助开发者保持代码的一致性和整洁性。它支持多种编程语言，并提供灵活的配置选项，使得开发者能够根据项目需求自定义格式化规则。通过Spotless，您可以轻松地自动化代码格式化过程，减少手动干预，提高开发效率。

### 入门示例

假设您正在开发一个Java项目，团队成员的代码风格各不相同，导致代码审查时频繁出现问题。使用Spotless，您可以在项目中添加以下配置：

```groovy
plugins {
    id 'com.diffplug.spotless' version '5.15.0'
}

spotless {
    java {
        target 'src/**/*.java'
        googleJavaFormat('1.9')
    }
}
```

这样，每当您运行构建任务时，Spotless会自动格式化所有Java文件，确保代码风格一致。您只需专注于逻辑实现，而不必担心格式问题。

### spotless Lib v3.0.0.BETA4版本更新了什么

在Spotless Lib v3.0.0.BETA4版本中，新增了支持代码检查的API，尽管Spotless仍然主要是一个格式化工具，但在格式化失败时，它能够灵活地将这些失败建模为检查项。此外，新增了行结束符策略“PRESERVE”，可以保留每个文件的首个行结束符。此版本还进行了重要的结构调整，移除了某些方法以简化使用。

### 更新日志

#### 新增
- 新增支持代码检查的API。Spotless仍然主要是格式化工具，但在格式化失败时，可以将这些失败视为检查项，以便继续格式化并捕获导致失败的行号。
- 支持行结束符策略“PRESERVE”，将每个文件的首个行结束符作为设置。

#### 变更
- 重要变更：将`PaddedCell.DirtyState`移至顶层类，并添加新方法。
- 重要变更：从`Formatter`中移除了`isClean`、`applyTo`和`applyToAndReturnResultIfDirty`方法，用户应使用`DirtyState`。

#### 修复
- `ktlint`步骤现在从字符串读取，而不是从文件读取，以避免覆盖之前的步骤。

### 总结

在Spotless Lib v3.0.0.BETA4版本中，新增了代码检查API和行结束符策略“PRESERVE”，并进行了重要的结构调整和修复。这些更新使得Spotless在保持代码整洁性和一致性方面更加高效和灵活。