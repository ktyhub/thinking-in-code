# å¼€å‘è€…ç¤¾åŒºç³»ç»Ÿ | Developer Community Platform

<div class="community-platform">
  <!-- ä¸“å®¶è®¤è¯ç³»ç»Ÿ -->
  <div class="expert-certification">
    <h2>ğŸ–ï¸ æŠ€æœ¯ä¸“å®¶è®¤è¯ä½“ç³»</h2>
    
    <div class="certification-levels">
      <div class="cert-level bronze">
        <div class="level-icon">ğŸ¥‰</div>
        <h3>é“œç‰Œè´¡çŒ®è€…</h3>
        <div class="requirements">
          <p>è¦æ±‚:</p>
          <ul>
            <li>æäº¤3ç¯‡é«˜è´¨é‡æŠ€æœ¯æ–‡ç« </li>
            <li>å®Œæˆ5æ¬¡æºç æ³¨é‡Š</li>
            <li>è·å¾—ç¤¾åŒº50+ç‚¹èµ</li>
          </ul>
        </div>
        <div class="benefits">
          <p>æƒç›Š:</p>
          <ul>
            <li>ä¸“å±å¾½ç« æ˜¾ç¤º</li>
            <li>ä¼˜å…ˆæŠ€æœ¯è®¨è®ºæƒ</li>
            <li>æœˆåº¦æŠ€æœ¯æŠ¥å‘Š</li>
          </ul>
        </div>
        <button class="apply-cert" data-level="bronze">ç”³è¯·è®¤è¯</button>
      </div>
      
      <div class="cert-level silver">
        <div class="level-icon">ğŸ¥ˆ</div>
        <h3>é“¶ç‰Œä¸“å®¶</h3>
        <div class="requirements">
          <p>è¦æ±‚:</p>
          <ul>
            <li>å®Œæˆ10ç¯‡æ·±åº¦æºç è§£æ</li>
            <li>è·å¾—200+ç¤¾åŒºå£°æœ›</li>
            <li>å‚ä¸3æ¬¡æŠ€æœ¯è¯„å®¡</li>
          </ul>
        </div>
        <div class="benefits">
          <p>æƒç›Š:</p>
          <ul>
            <li>æŠ€æœ¯ä¸“æ ä½œè€…</li>
            <li>çº¿ä¸‹èšä¼šé‚€è¯·</li>
            <li>ä¼ä¸šå†…æ¨æœºä¼š</li>
          </ul>
        </div>
        <button class="apply-cert" data-level="silver">ç”³è¯·è®¤è¯</button>
      </div>
      
      <div class="cert-level gold">
        <div class="level-icon">ğŸ¥‡</div>
        <h3>é‡‘ç‰Œæ¶æ„å¸ˆ</h3>
        <div class="requirements">
          <p>è¦æ±‚:</p>
          <ul>
            <li>é¢†å¯¼æŠ€æœ¯ä¸“é¢˜é¡¹ç›®</li>
            <li>å¼€æºé¡¹ç›®æ ¸å¿ƒè´¡çŒ®</li>
            <li>æŒ‡å¯¼æ–°æ‰‹è´¡çŒ®è€…</li>
          </ul>
        </div>
        <div class="benefits">
          <p>æƒç›Š:</p>
          <ul>
            <li>æŠ€æœ¯é¡¾é—®è®¤è¯</li>
            <li>å•†ä¸šåˆä½œæœºä¼š</li>
            <li>å¤§ä¼šæ¼”è®²é‚€è¯·</li>
          </ul>
        </div>
        <button class="apply-cert" data-level="gold">ç”³è¯·è®¤è¯</button>
      </div>
    </div>
  </div>

  <!-- è´¡çŒ®ç§¯åˆ†ç³»ç»Ÿ -->
  <div class="contribution-system">
    <h2>â­ è´¡çŒ®ç§¯åˆ†æ’è¡Œæ¦œ</h2>
    
    <div class="leaderboard">
      <div class="leaderboard-filters">
        <button class="filter-btn active" data-period="week">æœ¬å‘¨</button>
        <button class="filter-btn" data-period="month">æœ¬æœˆ</button>
        <button class="filter-btn" data-period="year">æœ¬å¹´</button>
        <button class="filter-btn" data-period="all">å…¨éƒ¨</button>
      </div>
      
      <div class="top-contributors">
        <div class="contributor-item rank-1">
          <div class="rank-badge">ğŸ†</div>
          <div class="contributor-info">
            <img src="/img/avatars/user1.jpg" alt="å¼ ä¸‰" class="avatar">
            <div class="contributor-details">
              <h4>å¼ ä¸‰ <span class="cert-badge gold">ğŸ¥‡</span></h4>
              <p>Spring Boot æ ¸å¿ƒè´¡çŒ®è€…</p>
              <div class="contribution-stats">
                <span>æ–‡ç« : 25</span>
                <span>æ³¨é‡Š: 156</span>
                <span>ç§¯åˆ†: 2850</span>
              </div>
            </div>
          </div>
          <div class="points">2850åˆ†</div>
        </div>
        
        <div class="contributor-item rank-2">
          <div class="rank-badge">ğŸ¥ˆ</div>
          <div class="contributor-info">
            <img src="/img/avatars/user2.jpg" alt="æå››" class="avatar">
            <div class="contributor-details">
              <h4>æå›› <span class="cert-badge silver">ğŸ¥ˆ</span></h4>
              <p>Dubbo æ¶æ„ä¸“å®¶</p>
              <div class="contribution-stats">
                <span>æ–‡ç« : 18</span>
                <span>æ³¨é‡Š: 98</span>
                <span>ç§¯åˆ†: 2340</span>
              </div>
            </div>
          </div>
          <div class="points">2340åˆ†</div>
        </div>
        
        <div class="contributor-item rank-3">
          <div class="rank-badge">ğŸ¥‰</div>
          <div class="contributor-info">
            <img src="/img/avatars/user3.jpg" alt="ç‹äº”" class="avatar">
            <div class="contributor-details">
              <h4>ç‹äº” <span class="cert-badge bronze">ğŸ¥‰</span></h4>
              <p>Kubernetes çˆ±å¥½è€…</p>
              <div class="contribution-stats">
                <span>æ–‡ç« : 12</span>
                <span>æ³¨é‡Š: 67</span>
                <span>ç§¯åˆ†: 1890</span>
              </div>
            </div>
          </div>
          <div class="points">1890åˆ†</div>
        </div>
      </div>
    </div>
    
    <!-- ç§¯åˆ†è·å–è§„åˆ™ -->
    <div class="points-rules">
      <h3>ğŸ“‹ ç§¯åˆ†è·å–è§„åˆ™</h3>
      <div class="rules-grid">
        <div class="rule-item">
          <div class="rule-action">å‘å¸ƒæŠ€æœ¯æ–‡ç« </div>
          <div class="rule-points">+50-200åˆ†</div>
          <div class="rule-desc">æ ¹æ®æ–‡ç« è´¨é‡å’Œé˜…è¯»é‡</div>
        </div>
        <div class="rule-item">
          <div class="rule-action">æºç æ³¨é‡Š</div>
          <div class="rule-points">+10-30åˆ†</div>
          <div class="rule-desc">æ¯æ¡æœ‰æ•ˆæ³¨é‡Š</div>
        </div>
        <div class="rule-item">
          <div class="rule-action">æŠ€æœ¯é—®ç­”</div>
          <div class="rule-points">+5-50åˆ†</div>
          <div class="rule-desc">æé—®æˆ–å›ç­”è¢«é‡‡çº³</div>
        </div>
        <div class="rule-item">
          <div class="rule-action">ä»£ç è´¡çŒ®</div>
          <div class="rule-points">+100-500åˆ†</div>
          <div class="rule-desc">å¼€æºé¡¹ç›®è´¡çŒ®</div>
        </div>
      </div>
    </div>
  </div>

  <!-- æºç æ‰¹æ³¨ç³»ç»Ÿ -->
  <div class="code-annotation-system">
    <h2>ğŸ“ åä½œæºç æ‰¹æ³¨</h2>
    
    <div class="annotation-workspace">
      <div class="file-selector">
        <select id="annotation-file">
          <option value="dubbo/DubboProtocol.java">DubboProtocol.java</option>
          <option value="spring/ApplicationContext.java">ApplicationContext.java</option>
          <option value="kafka/KafkaProducer.java">KafkaProducer.java</option>
        </select>
        <button id="load-file">åŠ è½½æ–‡ä»¶</button>
      </div>
      
      <div class="annotation-editor">
        <div class="code-panel">
          <div class="line-numbers" id="line-numbers">
            <!-- åŠ¨æ€ç”Ÿæˆè¡Œå· -->
          </div>
          <div class="code-content" id="annotated-code">
            <pre><code class="language-java">
// é€‰æ‹©æ–‡ä»¶å¼€å§‹åä½œæ³¨é‡Š
public class Example {
    // ä»£ç å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º
}
            </code></pre>
          </div>
        </div>
        
        <div class="annotations-panel">
          <h4>ğŸ’¬ æ‰¹æ³¨åˆ—è¡¨</h4>
          <div class="annotation-list" id="annotation-list">
            <div class="annotation-item">
              <div class="annotation-header">
                <span class="line-ref">ç¬¬ 15 è¡Œ</span>
                <span class="author">å¼ ä¸‰</span>
                <span class="timestamp">2å°æ—¶å‰</span>
              </div>
              <div class="annotation-content">
                è¿™é‡Œä½¿ç”¨äº†åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ï¼Œç¡®ä¿å•ä¾‹çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯volatileå…³é”®å­—çš„ä½¿ç”¨ã€‚
              </div>
              <div class="annotation-actions">
                <button class="like-btn">ğŸ‘ 12</button>
                <button class="reply-btn">ğŸ’¬ å›å¤</button>
                <button class="edit-btn">âœï¸ ç¼–è¾‘</button>
              </div>
            </div>
          </div>
          
          <div class="add-annotation-form" id="add-annotation-form" style="display: none;">
            <h5>æ·»åŠ æ–°æ‰¹æ³¨</h5>
            <div class="form-group">
              <label>æ‰¹æ³¨è¡Œå·:</label>
              <input type="number" id="annotation-line" readonly>
            </div>
            <div class="form-group">
              <label>æ‰¹æ³¨å†…å®¹:</label>
              <textarea id="annotation-content" placeholder="è¯·è¾“å…¥æ‚¨çš„æŠ€æœ¯è§è§£..."></textarea>
            </div>
            <div class="form-group">
              <label>æ‰¹æ³¨ç±»å‹:</label>
              <select id="annotation-type">
                <option value="explanation">åŸç†è§£é‡Š</option>
                <option value="optimization">æ€§èƒ½ä¼˜åŒ–</option>
                <option value="design-pattern">è®¾è®¡æ¨¡å¼</option>
                <option value="best-practice">æœ€ä½³å®è·µ</option>
                <option value="pitfall">å¸¸è§é™·é˜±</option>
              </select>
            </div>
            <div class="form-actions">
              <button id="submit-annotation">æäº¤æ‰¹æ³¨</button>
              <button id="cancel-annotation">å–æ¶ˆ</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- æŠ€æœ¯é—®ç­”æ¨¡å— -->
  <div class="tech-qa-system">
    <h2>ğŸ¤” æŠ€æœ¯é—®ç­”ç¤¾åŒº</h2>
    
    <div class="qa-controls">
      <div class="qa-filters">
        <button class="filter-btn active" data-filter="all">å…¨éƒ¨é—®é¢˜</button>
        <button class="filter-btn" data-filter="unanswered">æœªè§£ç­”</button>
        <button class="filter-btn" data-filter="bounty">æ‚¬èµé—®é¢˜</button>
        <button class="filter-btn" data-filter="my">æˆ‘çš„é—®é¢˜</button>
      </div>
      
      <div class="qa-sort">
        <select id="qa-sort-by">
          <option value="newest">æœ€æ–°å‘å¸ƒ</option>
          <option value="active">æœ€è¿‘æ´»è·ƒ</option>
          <option value="votes">æœ€å¤šæŠ•ç¥¨</option>
          <option value="views">æœ€å¤šæµè§ˆ</option>
        </select>
      </div>
      
      <button class="ask-question-btn" id="ask-question">ğŸ™‹â€â™‚ï¸ æé—®</button>
    </div>
    
    <div class="questions-list">
      <div class="question-item">
        <div class="question-stats">
          <div class="stat-item">
            <span class="stat-value">15</span>
            <span class="stat-label">æŠ•ç¥¨</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">3</span>
            <span class="stat-label">å›ç­”</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">248</span>
            <span class="stat-label">æµè§ˆ</span>
          </div>
        </div>
        
        <div class="question-content">
          <h3><a href="#question-1">Dubbo 3.x ä¸­çš„åº”ç”¨çº§æœåŠ¡å‘ç°æœºåˆ¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a></h3>
          <div class="question-excerpt">
            åœ¨Dubbo 3.xç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº†åº”ç”¨çº§æœåŠ¡å‘ç°æœºåˆ¶ã€‚æƒ³äº†è§£è¿™ä¸ªæœºåˆ¶ç›¸æ¯”æ¥å£çº§æœåŠ¡å‘ç°æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œä»¥åŠå…·ä½“çš„å®ç°åŸç†...
          </div>
          <div class="question-tags">
            <span class="tag">dubbo</span>
            <span class="tag">service-discovery</span>
            <span class="tag">microservices</span>
          </div>
          <div class="question-meta">
            <span class="author">
              <img src="/img/avatars/user4.jpg" alt="é—®é¢˜ä½œè€…" class="mini-avatar">
              å°æåŒå­¦
            </span>
            <span class="timestamp">2å°æ—¶å‰æé—®</span>
            <span class="bounty">ğŸ¯ æ‚¬èµ 100åˆ†</span>
          </div>
        </div>
      </div>
      
      <div class="question-item answered">
        <div class="question-stats">
          <div class="stat-item">
            <span class="stat-value">8</span>
            <span class="stat-label">æŠ•ç¥¨</span>
          </div>
          <div class="stat-item accepted">
            <span class="stat-value">âœ“</span>
            <span class="stat-label">å·²è§£å†³</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">156</span>
            <span class="stat-label">æµè§ˆ</span>
          </div>
        </div>
        
        <div class="question-content">
          <h3><a href="#question-2">Spring Boot 3.x åŸç”Ÿé•œåƒç¼–è¯‘æ—¶å‡ºç°åå°„ç›¸å…³é”™è¯¯</a></h3>
          <div class="question-excerpt">
            ä½¿ç”¨GraalVMç¼–è¯‘Spring Boot 3.xåº”ç”¨ä¸ºåŸç”Ÿé•œåƒæ—¶ï¼Œé‡åˆ°äº†åå°„ç›¸å…³çš„é…ç½®é—®é¢˜ã€‚å·²ç»æ·»åŠ äº†reflect-config.jsonä½†ä»ç„¶...
          </div>
          <div class="question-tags">
            <span class="tag">spring-boot</span>
            <span class="tag">graalvm</span>
            <span class="tag">native-image</span>
          </div>
          <div class="question-meta">
            <span class="author">
              <img src="/img/avatars/user5.jpg" alt="é—®é¢˜ä½œè€…" class="mini-avatar">
              æ¶æ„å¸ˆå°ç‹
            </span>
            <span class="timestamp">1å¤©å‰æé—®</span>
            <span class="best-answer">ğŸ’¡ æœ€ä½³ç­”æ¡ˆæ¥è‡ª å¼ ä¸‰</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- æŠ€æœ¯æŒ‘æˆ˜ä»»åŠ¡ç³»ç»Ÿ -->
  <div class="tech-challenges">
    <h2>ğŸ† æŠ€æœ¯æŒ‘æˆ˜ä»»åŠ¡</h2>
    
    <div class="challenge-categories">
      <div class="category-card">
        <h3>ğŸ”° æ–°æ‰‹æŒ‘æˆ˜</h3>
        <p>é€‚åˆåˆå­¦è€…çš„åŸºç¡€æŠ€æœ¯æŒ‘æˆ˜</p>
        <div class="challenge-stats">
          <span>12ä¸ªæŒ‘æˆ˜</span>
          <span>å¹³å‡å¥–åŠ±: 50åˆ†</span>
        </div>
        <button class="view-challenges">æŸ¥çœ‹æŒ‘æˆ˜</button>
      </div>
      
      <div class="category-card">
        <h3>âš¡ è¿›é˜¶æŒ‘æˆ˜</h3>
        <p>ä¸­çº§å¼€å‘è€…çš„æŠ€æœ¯æ·±åº¦æŒ‘æˆ˜</p>
        <div class="challenge-stats">
          <span>8ä¸ªæŒ‘æˆ˜</span>
          <span>å¹³å‡å¥–åŠ±: 150åˆ†</span>
        </div>
        <button class="view-challenges">æŸ¥çœ‹æŒ‘æˆ˜</button>
      </div>
      
      <div class="category-card">
        <h3>ğŸš€ ä¸“å®¶æŒ‘æˆ˜</h3>
        <p>æ¶æ„å¸ˆçº§åˆ«çš„å¤æ‚æŠ€æœ¯æŒ‘æˆ˜</p>
        <div class="challenge-stats">
          <span>5ä¸ªæŒ‘æˆ˜</span>
          <span>å¹³å‡å¥–åŠ±: 500åˆ†</span>
        </div>
        <button class="view-challenges">æŸ¥çœ‹æŒ‘æˆ˜</button>
      </div>
    </div>
    
    <div class="active-challenges">
      <h3>ğŸ”¥ çƒ­é—¨æŒ‘æˆ˜</h3>
      
      <div class="challenge-item">
        <div class="challenge-header">
          <h4>å®ç°è‡ªå®šä¹‰çš„Dubboè´Ÿè½½å‡è¡¡ç®—æ³•</h4>
          <span class="difficulty expert">ä¸“å®¶çº§</span>
          <span class="reward">ğŸ 300åˆ†</span>
        </div>
        <div class="challenge-description">
          åŸºäºå“åº”æ—¶é—´å’ŒæœåŠ¡å™¨è´Ÿè½½è®¾è®¡ä¸€ä¸ªæ™ºèƒ½è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œè¦æ±‚è€ƒè™‘æœåŠ¡å™¨çš„å®æ—¶æ€§èƒ½æŒ‡æ ‡...
        </div>
        <div class="challenge-requirements">
          <strong>è¦æ±‚:</strong>
          <ul>
            <li>å®ç°LoadBalanceæ¥å£</li>
            <li>æ”¯æŒé…ç½®æƒé‡ç­–ç•¥</li>
            <li>æä¾›æ€§èƒ½æµ‹è¯•æŠ¥å‘Š</li>
            <li>ç¼–å†™å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£</li>
          </ul>
        </div>
        <div class="challenge-meta">
          <span>æˆªæ­¢æ—¶é—´: 7å¤©å</span>
          <span>å·²å‚ä¸: 23äºº</span>
          <button class="join-challenge">æ¥å—æŒ‘æˆ˜</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// ç¤¾åŒºå¹³å°ç®¡ç†ç±»
class CommunityPlatform {
    constructor() {
        this.currentUser = {
            id: 'user123',
            name: 'å½“å‰ç”¨æˆ·',
            level: 'bronze',
            points: 450,
            contributions: {
                articles: 5,
                annotations: 23,
                answers: 8
            }
        };
        
        this.init();
    }
    
    init() {
        this.setupCertificationSystem();
        this.setupAnnotationSystem();
        this.setupQASystem();
        this.setupChallengeSystem();
        this.loadUserProgress();
    }
    
    setupCertificationSystem() {
        document.querySelectorAll('.apply-cert').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const level = e.target.dataset.level;
                this.applyCertification(level);
            });
        });
    }
    
    applyCertification(level) {
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ»¡è¶³æ¡ä»¶
        const requirements = this.getCertificationRequirements(level);
        const userStats = this.currentUser.contributions;
        
        if (this.checkRequirements(requirements, userStats)) {
            this.showCertificationModal(level);
        } else {
            this.showRequirementsModal(level, requirements);
        }
    }
    
    getCertificationRequirements(level) {
        const requirements = {
            bronze: { articles: 3, annotations: 5, points: 100 },
            silver: { articles: 10, annotations: 50, points: 500 },
            gold: { articles: 20, annotations: 100, points: 2000 }
        };
        return requirements[level];
    }
    
    checkRequirements(requirements, userStats) {
        return userStats.articles >= requirements.articles &&
               userStats.annotations >= requirements.annotations &&
               this.currentUser.points >= requirements.points;
    }
    
    setupAnnotationSystem() {
        // ä»£ç è¡Œç‚¹å‡»äº‹ä»¶
        document.addEventListener('click', (e) => {
            if (e.target.closest('.code-content')) {
                const lineElement = e.target.closest('[data-line]');
                if (lineElement) {
                    this.selectLineForAnnotation(lineElement.dataset.line);
                }
            }
        });
        
        document.getElementById('submit-annotation')?.addEventListener('click', () => {
            this.submitAnnotation();
        });
        
        document.getElementById('cancel-annotation')?.addEventListener('click', () => {
            this.cancelAnnotation();
        });
    }
    
    selectLineForAnnotation(lineNumber) {
        const form = document.getElementById('add-annotation-form');
        const lineInput = document.getElementById('annotation-line');
        
        lineInput.value = lineNumber;
        form.style.display = 'block';
        
        // é«˜äº®é€‰ä¸­çš„è¡Œ
        this.highlightSelectedLine(lineNumber);
    }
    
    highlightSelectedLine(lineNumber) {
        // ç§»é™¤ä¹‹å‰çš„é«˜äº®
        document.querySelectorAll('.line-selected').forEach(el => {
            el.classList.remove('line-selected');
        });
        
        // æ·»åŠ æ–°çš„é«˜äº®
        const lineElement = document.querySelector(`[data-line="${lineNumber}"]`);
        if (lineElement) {
            lineElement.classList.add('line-selected');
        }
    }
    
    submitAnnotation() {
        const lineNumber = document.getElementById('annotation-line').value;
        const content = document.getElementById('annotation-content').value;
        const type = document.getElementById('annotation-type').value;
        
        if (!content.trim()) {
            alert('è¯·è¾“å…¥æ‰¹æ³¨å†…å®¹');
            return;
        }
        
        const annotation = {
            id: Date.now(),
            line: lineNumber,
            content: content,
            type: type,
            author: this.currentUser.name,
            timestamp: new Date(),
            likes: 0
        };
        
        this.addAnnotationToList(annotation);
        this.awardPoints('annotation', 15);
        this.cancelAnnotation();
    }
    
    addAnnotationToList(annotation) {
        const annotationList = document.getElementById('annotation-list');
        const annotationElement = this.createAnnotationElement(annotation);
        annotationList.insertBefore(annotationElement, annotationList.firstChild);
    }
    
    createAnnotationElement(annotation) {
        const div = document.createElement('div');
        div.className = 'annotation-item';
        div.innerHTML = `
            <div class="annotation-header">
                <span class="line-ref">ç¬¬ ${annotation.line} è¡Œ</span>
                <span class="author">${annotation.author}</span>
                <span class="timestamp">åˆšåˆš</span>
            </div>
            <div class="annotation-content">${annotation.content}</div>
            <div class="annotation-actions">
                <button class="like-btn">ğŸ‘ ${annotation.likes}</button>
                <button class="reply-btn">ğŸ’¬ å›å¤</button>
                <button class="edit-btn">âœï¸ ç¼–è¾‘</button>
            </div>
        `;
        return div;
    }
    
    setupQASystem() {
        document.getElementById('ask-question')?.addEventListener('click', () => {
            this.showQuestionModal();
        });
        
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                this.filterQuestions(e.target.dataset.filter);
            });
        });
    }
    
    setupChallengeSystem() {
        document.querySelectorAll('.join-challenge').forEach(btn => {
            btn.addEventListener('click', (e) => {
                this.joinChallenge(e.target.closest('.challenge-item'));
            });
        });
    }
    
    joinChallenge(challengeElement) {
        const challengeTitle = challengeElement.querySelector('h4').textContent;
        
        if (confirm(`ç¡®å®šè¦å‚åŠ "${challengeTitle}"æŒ‘æˆ˜å—ï¼Ÿ`)) {
            this.showChallengeDetails(challengeElement);
        }
    }
    
    awardPoints(action, points) {
        this.currentUser.points += points;
        this.showPointsToast(`+${points}åˆ†ï¼`, action);
        this.updateUserProgress();
    }
    
    showPointsToast(message, action) {
        const toast = document.createElement('div');
        toast.className = 'points-toast';
        toast.innerHTML = `
            <div class="toast-icon">â­</div>
            <div class="toast-message">${message}</div>
            <div class="toast-action">${this.getActionLabel(action)}</div>
        `;
        
        document.body.appendChild(toast);
        
        setTimeout(() => toast.classList.add('show'), 100);
        setTimeout(() => toast.remove(), 3000);
    }
    
    getActionLabel(action) {
        const labels = {
            annotation: 'æºç æ‰¹æ³¨',
            article: 'æŠ€æœ¯æ–‡ç« ',
            answer: 'é—®ç­”å›å¤',
            challenge: 'æŒ‘æˆ˜å®Œæˆ'
        };
        return labels[action] || action;
    }
    
    updateUserProgress() {
        // æ›´æ–°ç”¨æˆ·ç§¯åˆ†æ˜¾ç¤º
        document.querySelectorAll('.user-points').forEach(el => {
            el.textContent = this.currentUser.points;
        });
        
        // æ£€æŸ¥æ˜¯å¦å¯ä»¥å‡çº§è®¤è¯
        this.checkCertificationEligibility();
    }
    
    loadUserProgress() {
        // æ¨¡æ‹ŸåŠ è½½ç”¨æˆ·è¿›åº¦
        setTimeout(() => {
            this.displayUserStats();
        }, 1000);
    }
    
    displayUserStats() {
        const stats = this.currentUser.contributions;
        
        // æ›´æ–°è´¡çŒ®ç»Ÿè®¡
        document.querySelectorAll('.contribution-stats').forEach(el => {
            const articleSpan = el.querySelector('span:nth-child(1)');
            const annotationSpan = el.querySelector('span:nth-child(2)');
            const pointSpan = el.querySelector('span:nth-child(3)');
            
            if (articleSpan) articleSpan.textContent = `æ–‡ç« : ${stats.articles}`;
            if (annotationSpan) annotationSpan.textContent = `æ³¨é‡Š: ${stats.annotations}`;
            if (pointSpan) pointSpan.textContent = `ç§¯åˆ†: ${this.currentUser.points}`;
        });
    }
}

// åˆå§‹åŒ–ç¤¾åŒºå¹³å°
document.addEventListener('DOMContentLoaded', () => {
    new CommunityPlatform();
});
</script>
